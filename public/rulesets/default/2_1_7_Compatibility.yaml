rules:
  - id: 2.1.7.1
    title: "Compatibility: The interfaces must be compatible"
    description: This rule compares whether any API call has been deleted when comparing to previous version of OpenAPI specification.
    message: |
      The API is deleted
    option: Mandatory
    location: paths
    element: path
    call:
      function: checkCompatibility
      functionParams:
        methods:
          - "get"
          - "put"
          - "post"
          - "patch"
          - "delete"
    status: implemented
    severity: critical

  - id: 2.1.7.2
    title: "Compatibility: The interfaces must be compatible"
    description: This rule compares whether any API request or response parameter has been deleted when comparing to previous version of OpenAPI specification.
    message: |
      The API request or response parameter is deleted.
    option: Mandatory
    location: paths
    element:
      - requestBody
      - responses
    call:
      function: checkCompatibility
    status: implemented
    severity: critical

  - id: 2.1.7.3
    title: "Compatibility: The interfaces must be compatible"
    description: This rule compares whether new Mandatory request parameters have been added to existing API calls when comparing to previous version of OpenAPI specification.
    message: |
      Adding Mandatory Request Parameters to APIs
    option: Mandatory
    location: paths
    element: requestBody
    call:
      function: checkCompatibility
    status: implemented
    severity: critical

  - id: 2.1.7.4
    title: "Compatibility: The interfaces must be compatible"
    description: This rule compares whether the request and response body parameter types are same for same parameters.
    message: |
      The API request or response parameter types are incompatible.
    option: Mandatory
    location: paths
    element:
      - requestBody
      - responses
    call:
      function: checkCompatibility
    status: implemented
    severity: critical

  - id: 2.1.7.5
    title: "Compatibility: The interfaces must be compatible"
    description: This rule compares whether the value range in enum type has been changed when comparing to previous OpenAPI specification
    message: |
      The value range of the API request parameter is narrowed down.
    option: Mandatory
    location: paths
    element:
      - requestBody
      - responses
    call:
      function: checkCompatibility
    status: implemented
    severity: critical

  - id: 2.1.7.6
    title: "Compatibility: The interfaces must be compatible"
    description: This rule compares whether status code of API response has been deleted or modified when comparing to previous OpenAPI specification
    message: |
      The API response status code is deleted or changed.
    option: Mandatory
    location: paths
    element:
      - responses
    call:
      function: checkCompatibility
    status: implemented
    severity: critical

  - id: 2.1.7.7
    title: "Compatibility: The interfaces must be compatible"
    description: This rule compares whether response header in API response has been deleted or modified when comparing to previous OpenAPI specification
    message: |
      Modify or delete a response header.
    option: Mandatory
    location: paths
    element:
      - responses
    call:
      function: checkCompatibility
      functionParams:
        parameter_type:
          - "headers"
        action:
          - "delete"
          - "modify"
    status: devel
    severity: critical
